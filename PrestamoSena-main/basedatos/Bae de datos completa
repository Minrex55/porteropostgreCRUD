--
-- PostgreSQL database dump
--

\restrict ghUMxNQJhmpeeJTS4EZT5CIgthKAjAFvstrpO1rJjoW86pAOawfiZOeRScy1OWk

-- Dumped from database version 16.10 (Ubuntu 16.10-0ubuntu0.24.04.1)
-- Dumped by pg_dump version 16.10 (Ubuntu 16.10-0ubuntu0.24.04.1)

-- Started on 2025-10-07 11:57:12 -05

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- TOC entry 224 (class 1255 OID 16402)
-- Name: insertar_perfil_funcionario(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.insertar_perfil_funcionario() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    INSERT INTO public.perfilFuncionario (
        idporteroPerfil,
        documentoPerfil,
        nombresPerfil,
        telefonoPerfil,
        correoPerfil
    ) VALUES (
        NEW.idportero,
        NEW.documento,
        NEW.nombres,
        NEW.telefono,
        NEW.correopersonal
    );

    RETURN NEW;
END;
$$;


ALTER FUNCTION public.insertar_perfil_funcionario() OWNER TO postgres;

--
-- TOC entry 225 (class 1255 OID 16403)
-- Name: insertar_perfil_invitado(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.insertar_perfil_invitado() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
BEGIN
    INSERT INTO public.perfilInvitado (
        idinvitadoPerfil,
        documentoPerfil,
        nombresPerfil,
        telefonoPerfil,
        correoPerfil
    ) VALUES (
        NEW.idinvitado,
        NEW.documento,
        NEW.nombres,
        NEW.telefono,
        NEW.correopersonal
    );

    RETURN NEW;
END;
$$;


ALTER FUNCTION public.insertar_perfil_invitado() OWNER TO postgres;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 223 (class 1259 OID 16456)
-- Name: equipos; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.equipos (
    idequipo integer NOT NULL,
    modelo character varying(100) NOT NULL,
    serial character varying(50) NOT NULL,
    fecha_ingreso timestamp without time zone DEFAULT CURRENT_TIMESTAMP NOT NULL,
    fecha_salida timestamp without time zone,
    idinvitado integer NOT NULL
);


ALTER TABLE public.equipos OWNER TO postgres;

--
-- TOC entry 222 (class 1259 OID 16455)
-- Name: equipos_id_equipo_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.equipos_id_equipo_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.equipos_id_equipo_seq OWNER TO postgres;

--
-- TOC entry 3542 (class 0 OID 0)
-- Dependencies: 222
-- Name: equipos_id_equipo_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.equipos_id_equipo_seq OWNED BY public.equipos.idequipo;


--
-- TOC entry 217 (class 1259 OID 16404)
-- Name: funcionarios; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.funcionarios (
    idportero integer NOT NULL,
    documento character varying(10) NOT NULL,
    nombres character varying(100) NOT NULL,
    telefono character varying(10) NOT NULL,
    correopersonal character varying(200) NOT NULL,
    contrasena character varying(255) NOT NULL,
    rol character varying(255) NOT NULL,
    estado character varying(30) DEFAULT 'Activo'::character varying NOT NULL,
    intentosfallidos integer DEFAULT 0 NOT NULL,
    fechacreacion character varying(50) DEFAULT (now())::text NOT NULL,
    creadopor character varying(100) DEFAULT 'Default'::character varying NOT NULL
);


ALTER TABLE public.funcionarios OWNER TO postgres;

--
-- TOC entry 218 (class 1259 OID 16413)
-- Name: invitado; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.invitado (
    idinvitado integer NOT NULL,
    documento character varying(10) NOT NULL,
    nombres character varying(100) NOT NULL,
    telefono character varying(10) NOT NULL,
    correopersonal character varying(250) NOT NULL,
    rol character varying(20) DEFAULT 'Invitado'::character varying NOT NULL,
    intentosfallidos integer DEFAULT 0 NOT NULL,
    estado character varying(30) NOT NULL
);


ALTER TABLE public.invitado OWNER TO postgres;

--
-- TOC entry 219 (class 1259 OID 16418)
-- Name: invitado_idinvitado_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.invitado_idinvitado_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.invitado_idinvitado_seq OWNER TO postgres;

--
-- TOC entry 3543 (class 0 OID 0)
-- Dependencies: 219
-- Name: invitado_idinvitado_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.invitado_idinvitado_seq OWNED BY public.invitado.idinvitado;


--
-- TOC entry 220 (class 1259 OID 16419)
-- Name: perfilfuncionario; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.perfilfuncionario (
    idporteroperfil integer NOT NULL,
    documentoperfil character varying(10) NOT NULL,
    nombresperfil character varying(100) NOT NULL,
    telefonoperfil character varying(10) NOT NULL,
    correoperfil character varying(200) NOT NULL,
    preguntauno character varying(250),
    preguntados character varying(250),
    preguntatres character varying(250),
    respuestauno character varying(250),
    respuestados character varying(250),
    respuestatres character varying(250)
);


ALTER TABLE public.perfilfuncionario OWNER TO postgres;

--
-- TOC entry 221 (class 1259 OID 16424)
-- Name: perfilinvitado; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.perfilinvitado (
    idinvitadoperfil integer NOT NULL,
    documentoperfil character varying(10) NOT NULL,
    nombresperfil character varying(100) NOT NULL,
    telefonoperfil character varying(10) NOT NULL,
    correoperfil character varying(250) NOT NULL,
    preguntauno character varying(250),
    preguntados character varying(250),
    preguntatres character varying(250),
    respuestauno character varying(250),
    respuestados character varying(250),
    respuestatres character varying(250)
);


ALTER TABLE public.perfilinvitado OWNER TO postgres;

--
-- TOC entry 215 (class 1259 OID 16389)
-- Name: porteria_idfuncionario_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.porteria_idfuncionario_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.porteria_idfuncionario_seq OWNER TO postgres;

--
-- TOC entry 3544 (class 0 OID 0)
-- Dependencies: 215
-- Name: porteria_idfuncionario_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.porteria_idfuncionario_seq OWNED BY public.funcionarios.idportero;


--
-- TOC entry 216 (class 1259 OID 16390)
-- Name: porteria; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.porteria (
    idportero integer DEFAULT nextval('public.porteria_idfuncionario_seq'::regclass) NOT NULL,
    documento character varying(10) NOT NULL,
    nombres character varying(100) NOT NULL,
    telefono character varying(10) NOT NULL,
    correopersonal character varying(200) NOT NULL,
    contrasena character varying(255) NOT NULL,
    rol character varying(255) NOT NULL,
    estado character varying(30) DEFAULT 'Activo'::character varying NOT NULL,
    intentosfallidos integer DEFAULT 0 NOT NULL,
    fechacreacion character varying(50) DEFAULT now() NOT NULL,
    creadopor character varying(100) DEFAULT 'Default'::character varying NOT NULL
);


ALTER TABLE public.porteria OWNER TO postgres;

--
-- TOC entry 3362 (class 2604 OID 16459)
-- Name: equipos idequipo; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.equipos ALTER COLUMN idequipo SET DEFAULT nextval('public.equipos_id_equipo_seq'::regclass);


--
-- TOC entry 3354 (class 2604 OID 16429)
-- Name: funcionarios idportero; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.funcionarios ALTER COLUMN idportero SET DEFAULT nextval('public.porteria_idfuncionario_seq'::regclass);


--
-- TOC entry 3359 (class 2604 OID 16430)
-- Name: invitado idinvitado; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.invitado ALTER COLUMN idinvitado SET DEFAULT nextval('public.invitado_idinvitado_seq'::regclass);


--
-- TOC entry 3536 (class 0 OID 16456)
-- Dependencies: 223
-- Data for Name: equipos; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.equipos (idequipo, modelo, serial, fecha_ingreso, fecha_salida, idinvitado) FROM stdin;
2	HP Pavilion	XYZ789	2025-09-21 13:31:22.924852	\N	2
\.


--
-- TOC entry 3530 (class 0 OID 16404)
-- Dependencies: 217
-- Data for Name: funcionarios; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.funcionarios (idportero, documento, nombres, telefono, correopersonal, contrasena, rol, estado, intentosfallidos, fechacreacion, creadopor) FROM stdin;
1	1038868735	Johan Perez	3117393212	jstiven600@gmail.com	1235789Mm@	Super_Portero	Activo	0	2025-09-16 14:44:11.40179-05	Default
6	1000412788	Diego Garcia	3332580018	diego.garcia144@hotmail.com	diegoG	SuperPortero	Activo	0	2025-09-16 15:56:03.40137-05	Default
\.


--
-- TOC entry 3531 (class 0 OID 16413)
-- Dependencies: 218
-- Data for Name: invitado; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.invitado (idinvitado, documento, nombres, telefono, correopersonal, rol, intentosfallidos, estado) FROM stdin;
2	1038868735	Johan Stiven	3117393212	jstiven600gmail.com	Invitado	0	Activo
\.


--
-- TOC entry 3533 (class 0 OID 16419)
-- Dependencies: 220
-- Data for Name: perfilfuncionario; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.perfilfuncionario (idporteroperfil, documentoperfil, nombresperfil, telefonoperfil, correoperfil, preguntauno, preguntados, preguntatres, respuestauno, respuestados, respuestatres) FROM stdin;
6	1000412788	Diego Garcia	3332580018	diego.garcia144@hotmail.com	\N	\N	\N	\N	\N	\N
\.


--
-- TOC entry 3534 (class 0 OID 16424)
-- Dependencies: 221
-- Data for Name: perfilinvitado; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.perfilinvitado (idinvitadoperfil, documentoperfil, nombresperfil, telefonoperfil, correoperfil, preguntauno, preguntados, preguntatres, respuestauno, respuestados, respuestatres) FROM stdin;
2	1038868735	Johan Stiven	3117393212	jstiven600gmail.com	\N	\N	\N	\N	\N	\N
\.


--
-- TOC entry 3529 (class 0 OID 16390)
-- Dependencies: 216
-- Data for Name: porteria; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.porteria (idportero, documento, nombres, telefono, correopersonal, contrasena, rol, estado, intentosfallidos, fechacreacion, creadopor) FROM stdin;
6	1542365895	Jacobo	5696585623	juliano@gmail.com	1455845	Mamahuevo	Activo	0	2025-09-16 14:34:56.944259-05	Default
\.


--
-- TOC entry 3545 (class 0 OID 0)
-- Dependencies: 222
-- Name: equipos_id_equipo_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.equipos_id_equipo_seq', 2, true);


--
-- TOC entry 3546 (class 0 OID 0)
-- Dependencies: 219
-- Name: invitado_idinvitado_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.invitado_idinvitado_seq', 2, true);


--
-- TOC entry 3547 (class 0 OID 0)
-- Dependencies: 215
-- Name: porteria_idfuncionario_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.porteria_idfuncionario_seq', 6, true);


--
-- TOC entry 3379 (class 2606 OID 16462)
-- Name: equipos equipos_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.equipos
    ADD CONSTRAINT equipos_pkey PRIMARY KEY (idequipo);


--
-- TOC entry 3381 (class 2606 OID 16464)
-- Name: equipos equipos_serial_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.equipos
    ADD CONSTRAINT equipos_serial_key UNIQUE (serial);


--
-- TOC entry 3367 (class 2606 OID 16432)
-- Name: invitado invitado_correopersonal_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.invitado
    ADD CONSTRAINT invitado_correopersonal_key UNIQUE (correopersonal);


--
-- TOC entry 3369 (class 2606 OID 16434)
-- Name: invitado invitado_documento_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.invitado
    ADD CONSTRAINT invitado_documento_key UNIQUE (documento);


--
-- TOC entry 3371 (class 2606 OID 16436)
-- Name: invitado invitado_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.invitado
    ADD CONSTRAINT invitado_pkey PRIMARY KEY (idinvitado);


--
-- TOC entry 3373 (class 2606 OID 16438)
-- Name: invitado invitado_telefono_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.invitado
    ADD CONSTRAINT invitado_telefono_key UNIQUE (telefono);


--
-- TOC entry 3375 (class 2606 OID 16440)
-- Name: perfilfuncionario perfilfuncionario_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.perfilfuncionario
    ADD CONSTRAINT perfilfuncionario_pkey PRIMARY KEY (idporteroperfil);


--
-- TOC entry 3377 (class 2606 OID 16442)
-- Name: perfilinvitado perfilinvitado_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.perfilinvitado
    ADD CONSTRAINT perfilinvitado_pkey PRIMARY KEY (idinvitadoperfil);


--
-- TOC entry 3365 (class 2606 OID 16400)
-- Name: porteria porteria_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.porteria
    ADD CONSTRAINT porteria_pkey PRIMARY KEY (idportero);


--
-- TOC entry 3383 (class 2620 OID 16443)
-- Name: funcionarios trg_insertar_perfil_funcionario; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER trg_insertar_perfil_funcionario AFTER INSERT ON public.funcionarios FOR EACH ROW EXECUTE FUNCTION public.insertar_perfil_funcionario();


--
-- TOC entry 3384 (class 2620 OID 16444)
-- Name: invitado trg_insertar_perfil_invitado; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER trg_insertar_perfil_invitado AFTER INSERT ON public.invitado FOR EACH ROW EXECUTE FUNCTION public.insertar_perfil_invitado();


--
-- TOC entry 3382 (class 2606 OID 16465)
-- Name: equipos equipos_idinvitado_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.equipos
    ADD CONSTRAINT equipos_idinvitado_fkey FOREIGN KEY (idinvitado) REFERENCES public.invitado(idinvitado) ON DELETE CASCADE;


-- Completed on 2025-10-07 11:57:13 -05

--
-- PostgreSQL database dump complete
--

\unrestrict ghUMxNQJhmpeeJTS4EZT5CIgthKAjAFvstrpO1rJjoW86pAOawfiZOeRScy1OWk

